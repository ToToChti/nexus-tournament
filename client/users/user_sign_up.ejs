<!DOCTYPE html>
<html lang="fr">

<head>
    <link rel="stylesheet" href="users/user_sign_up.css">
    <link rel="shortcut icon" href="images/icon.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page d'inscription</title>
</head>

<body>
    <body>
        <div class="container">

            <header class="d-flex justify-content-center align-items-center header-container">
                <a href="/home">
                    <button class="annuler" aria-label="Retour à la page d'accueil">Annuler</button>
                </a>
                <h1 class="header-title">Inscription</h1>
            </header>
        
            <main>     
                <div class="form-container"> 
                    <form method="post" action="../signup"  id="signup-form" enctype="multipart/form-data">
                        <div class="row">
                            <div class="col-3 input-effect">
                                <input  class="textbox effect-16"  type="text" name="lastname" placeholder="" required>
                                <label>Nom</label>
                                <span class="focus-border"></span>
                            </div>
                            <div class="col-3 input-effect">
                                <input  class="textbox effect-16"  type="text" name="firstname" placeholder="" required>
                                <label>Prénom</label>
                                <span class="focus-border"></span>
                            </div>
                            <div class="col-3 input-effect">
                                <input type="text"  class="textbox effect-16"  name="pseudo" placeholder="" required>
                                <label for="pseudo">Pseudo</label>
                                <span class="focus-border"></span>
                            </div>
                            <div class="col-3 input-effect">
                                <input type="text"  class="textbox effect-16"  name="email" placeholder="" required>
                                <label for="email">Email</label>
                                <span class="focus-border"></span>
                            </div>
                            <div class="col-3 input-effect">
                                <input type="password"  class="textbox effect-16"  name="password" placeholder="" required>
                                <label for="mdp">Mot de Passe</label>
                                <span class="focus-border"></span>
                            </div>
                            <div class="col-3 input-effect">
                                <input type="password"  class="textbox effect-16"  name="password_confirm" placeholder="" required>
                                <label for="mdp">Confirmez mot de passe</label>
                                <span class="focus-border"></span>
                            </div>
                            <div class="col-3-der input-effect">
                                <input type="text"  class="textbox effect-16"  name="country" placeholder="" required>
                                <label for="mdp">Pays</label>
                                <span class="focus-border"></span>
                            </div>

                            <input type="file" name="image" id="image-upload" class="file-input">
                    </form>
                </div>  


                        <div class="connecter-container">
                            <button type="submit" form="signup-form" class="inscrire">S'inscrire</button>
                            <p class="deja_un_compte">Déja un compte ?</p>
                            <a href="/signin">
                                <button class="connecter">Connectez-vous</button>
                            </a>
                        </div>
                
            </main>
                
            <div class="photo">
                <div class="round-circle">
                    <img id="preview-image" src="photo" alt="" class="profile-image">
            
                </div>
            
                    <form action="/upload" method="POST" enctype="multipart/form-data" class="upload-form">
                        <input type="file" name="image" id="image-upload" class="file-input">
                        <label for="image-upload" class="file-label">Choisir une image</label>
                    </form>
                </div>
            </div>
        </div>

        

        
            <script>
                document.querySelectorAll('.textbox').forEach(input => {
                    input.addEventListener('input', () => {
                        if (input.value.trim() !== '') {
                            input.classList.add('has-content');
                        } else {
                            input.classList.remove('has-content');
                        }
                    });
                });
            </script>

            <script>
                const fileInput = document.getElementById('image-upload');
                const previewImage = document.getElementById('preview-image');

                fileInput.addEventListener('change', (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();

                        reader.onload = function (e) {
                            previewImage.src = e.target.result; // Met à jour la source de l'image
                        };

                        reader.readAsDataURL(file); // Lit le fichier pour générer une URL
                    }
                });
            </script>

            <script>
                // Sélectionne le formulaire et les champs de mot de passe
                const form = document.querySelector('form');
                const password = document.querySelector('input[name="password"]');
                const passwordConfirm = document.querySelector('input[name="password_confirm"]');

                // Ajoute un écouteur d'événement pour la soumission du formulaire
                form.addEventListener('submit', (event) => {
                    // Si les mots de passe ne correspondent pas
                    if (password.value !== passwordConfirm.value) {
                        event.preventDefault(); // Empêche la soumission du formulaire
                        alert('Les mots de passe ne correspondent pas. Veuillez vérifier.');
                    }
                });
            </script>

            <script>
                fileInput.addEventListener('change', (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();

                        reader.onload = function (e) {
                            previewImage.src = e.target.result; // Met à jour la source de l'image
                        };

                        reader.readAsDataURL(file); // Lit le fichier pour générer une URL
                    }
                });
        </script>

        <script>
            document.querySelectorAll('.textbox').forEach(input => {
                input.addEventListener('input', () => {
                    if (input.value.trim() !== '') {
                        input.classList.add('has-content');
                    } else {
                        input.classList.remove('has-content');
                    }
                });
            });
        </script>


</body>
    

</html>